{% extends "base.html" %}
{% block content %}

    <link rel="stylesheet" href="{{ url_for('static', path='css/edit_event.css') }}">

<div class="edit-container">

    <div class="edit-header">
        <h1><strong>Edit Event üìù</strong></h1>
        <p class="subtitle">Refine your plan. This is where progress is built.</p>
    </div>

    <form method="post" class="edit-form">

        <div class="field">
            <label><strong>Title</strong></label>
            <input type="text" name="title" value="{{ event.title }}" required>
        </div>

        <div class="field">
            <label><strong>Description</strong></label>
            <textarea name="description" rows="4">{{ event.description or "" }}</textarea>
        </div>

        <div class="progress-wrapper">
        <label><strong>Progress</strong></label>

        <div class="smart-progress">
        <div class="smart-progress-fill"
             id="progressFill"
             style="width: {{ event.progress }}%;"></div>

        <input
            type="range"
            min="0"
            max="100"
            value="{{ event.progress }}"
            name="progress"
            id="progressSlider"
            oninput="updateProgress(this.value)"
        >
            </div>

            <div class="progress-value">
                <span id="progressValue">{{ event.progress }}</span>%
            </div>



            <div class="actions-row">
                <button class="btn-primary" type="submit">
                    Save Changes
                </button>

                <a href="/" class="btn-secondary">
                    Cancel
                </a>
            </div>
            </div>
        </form>

    <div class="status-panel">

        <h3>Status Control</h3>

        <div class="status-actions">

            <form method="post" action="/events/{{ event.id }}/done">
                <button class="btn-done">Mark as Done</button>
            </form>

            <form method="get" action="/events/{{ event.id }}/fail">
                <button class="btn-fail">Mark as Failed</button>
            </form>

            <form method="post" action="/events/{{ event.id }}/delete">
                <button class="btn-delete">Delete Event</button>
            </form>

        </div>

    </div>

</div>
<script>
function updateProgress(val) {
    document.getElementById("progressFill").style.width = val + "%";
    document.getElementById("progressValue").innerText = val;
}
</script>

{% endblock %}
