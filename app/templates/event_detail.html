{% extends "base.html" %}
{% block content %}
    <link rel="stylesheet" href="{{ url_for('static', path='css/event_detail.css') }}">

<div class="event-detail-container">

    <div class="event-header">
        <h1>{{ event.title }}</h1>
        <div class="event-meta">
            <span class="status {{ event.status }}">{{ event.status|upper }}</span>
            <span class="date">Created: {{ event.created_at.strftime("%d %b %Y") }}</span>
        </div>
    </div>

    <div class="event-progress">
        <div class="progress-label">
            Progress: {{ event.progress }}%
        </div>

        <div class="smart-progress">
            <div class="smart-progress-fill" style="width: {{ event.progress }}%"></div>
            <div class="smart-progress-thumb" style="left: {{ event.progress }}%"></div>
        </div>

        <div class="progress-message">
            {% if event.progress == 100 %}
                You did it. This is yours.
            {% elif event.progress >= 70 %}
                You're close. Don't stop now.
            {% elif event.progress >= 30 %}
                Momentum is building.
            {% else %}
                Every start is ugly. Keep going.
            {% endif %}
        </div>
    </div>

    <div class="event-overview">
        <h2>Event overview</h2>

        <p class="overview-text">
            {{ event.description or "No description yet." }}
        </p>

        {% if event.failure_note %}
        <div class="failure-box">
            <h3>Last failure analysis</h3>
            <p>{{ event.failure_note }}</p>
        </div>
        {% endif %}
    </div>

    <div class="event-actions">
        <form action="/events/{{ event.id }}/done" method="post">
            <button class="btn done">Mark as Done</button>
        </form>

        <form action="/events/{{ event.id }}/fail" method="get">
            <button class="btn failed">Mark as Failed</button>
        </form>

        <a href="/events/{{ event.id }}/edit" class="btn edit">Edit</a>

        <form action="/events/{{ event.id }}/delete" method="post">
            <button class="btn delete">Delete</button>
        </form>
    </div>

</div>

{% endblock %}
